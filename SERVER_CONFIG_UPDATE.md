# 服务器地址配置更新说明

## 📝 更新内容

服务器地址已从 `192.168.18.138` 更新为 `10.91.225.137`

## 🔧 更新的文件

### 1. 环境配置文件
- **`.env`**: 主要配置文件
  ```env
  LLM_SERVER_URL=ws://10.91.225.137:8000
  LLM_SERVER_BACKUP_1=ws://192.168.18.138:8000  # 之前的IP作为备用
  ```

### 2. JavaScript配置文件
- **`src/config/llmConfig.js`**: LLM服务配置
  - 默认地址: `ws://10.91.225.137:8000`
  - 备用服务器保留之前的IP地址

- **`src/config/senceVoiceConfig.js`**: SenceVoice服务配置
  - 优先级1: `ws://10.91.225.137:8000`
  - 优先级2: `ws://192.168.18.138:8000`
  - 优先级3: `ws://localhost:8000`

### 3. YAML配置文件
- **`llm_config 2.yaml`**: 服务器列表配置
  - 主服务器更新为 `10.91.225.137:8000`

### 4. 文档文件
- **`EXPO_DIGITAL_HUMAN_GUIDE.md`**: 使用指南
  - 更新了流程图中的服务器地址

## 🚀 服务器优先级

系统会按以下顺序尝试连接服务器：

1. **主服务器**: `10.91.225.137:8000` (新地址)
2. **备用服务器1**: `192.168.18.138:8000` (之前的地址)
3. **备用服务器2**: `localhost:8000` (本地开发)
4. **备用服务器3**: `127.0.0.1:8000` (本地环回)

## ✅ 验证配置

运行验证脚本检查配置是否正确：

```bash
node verify_server_config.js
```

## 🔍 连接测试

### 1. 网络连通性测试
```bash
ping 10.91.225.137
```

### 2. 端口连通性测试
```bash
telnet 10.91.225.137 8000
```

### 3. WebSocket连接测试
在浏览器开发者控制台中测试：
```javascript
const ws = new WebSocket('ws://10.91.225.137:8000')
ws.onopen = () => console.log('✅ WebSocket连接成功')
ws.onerror = (e) => console.log('❌ WebSocket连接失败', e)
```

## 🛠️ 故障排除

### 如果连接失败：

1. **检查服务器状态**
   - 确认 `10.91.225.137` 服务器正在运行
   - 确认端口 `8000` 已开放

2. **检查网络**
   - 确认客户端能够访问服务器网络
   - 检查防火墙设置

3. **查看日志**
   - 检查浏览器控制台错误信息
   - 查看应用程序日志

4. **使用备用服务器**
   - 系统会自动尝试备用服务器
   - 可手动设置环境变量使用备用地址

## 📋 注意事项

- 🔄 **自动重试**: 如果主服务器不可用，系统会自动尝试备用服务器
- 🔧 **环境变量优先**: `.env` 文件中的配置优先级最高
- 📱 **跨平台兼容**: 配置适用于Web、Expo等所有平台
- 🔒 **安全考虑**: 确保服务器地址在可信任的网络环境中

## 🎯 验证结果

所有配置文件已成功更新：
- ✅ .env 文件
- ✅ llmConfig.js 
- ✅ senceVoiceConfig.js
- ✅ llm_config 2.yaml
- ✅ EXPO_DIGITAL_HUMAN_GUIDE.md

现在系统将优先使用 `10.91.225.137:8000` 作为主服务器地址。