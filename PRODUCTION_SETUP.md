# 🚀 生产环境配置指南

## 📋 配置步骤

### 1. 获取 OpenAI API 密钥
1. 访问 [OpenAI Platform](https://platform.openai.com)
2. 注册/登录账号
3. 前往 API Keys 页面创建新的 API 密钥
4. 复制密钥（格式：`sk-...`）

### 2. 配置环境变量

**方法一：创建 .env 文件（推荐）**
```bash
# 在项目根目录创建 .env 文件
cp .env.example .env

# 编辑 .env 文件，填入真实的API密钥
OPENAI_API_KEY=sk-your-actual-api-key-here
USE_MOCK_SERVICES=false
ENABLE_DEBUG_LOGS=true
```

**方法二：直接修改配置文件**
```javascript
// 在 src/config/llmConfig.js 中直接配置
openai: {
  apiKey: 'sk-your-actual-api-key-here', // 替换为真实密钥
  baseURL: 'https://api.openai.com/v1',
  // ...
}
```

### 3. 测试配置

1. 启动应用：`npm start` 或 `yarn start`
2. 进入 Connect 页面（Follow 页面）
3. 点击 **"🧪 测试服务连接"** 按钮
4. 查看测试结果：
   - ✅ **配置验证** - 检查 API 密钥是否配置
   - ✅ **LLM服务** - 测试与 OpenAI GPT 的连接
   - ✅ **数字人服务** - 验证完整服务初始化

### 4. 完整功能测试

**文字对话测试：**
1. 在输入框输入："你好，请介绍一下自己"
2. 点击发送按钮
3. 观察嘎巴龙的回复

**语音对话测试：**
1. 点击嘎巴龙头像
2. 等待 "🎤 正在录音..." 状态
3. 说话：例如 "你好嘎巴龙"
4. 再次点击停止录音
5. 观察完整的 STT → LLM → TTS 流程

## 🔧 服务架构

```
用户语音输入 → STT (Whisper) → LLM (GPT-3.5) → TTS → 语音播放
     ↓              ↓              ↓         ↓
  录音服务      语音识别        AI对话    语音合成
```

## 🐛 故障排查

### API 密钥错误
- **现象**: 配置测试失败，提示 "缺少OpenAI API密钥"
- **解决**: 检查 `.env` 文件或配置文件中的 `OPENAI_API_KEY`

### 网络连接问题
- **现象**: 请求超时或连接失败
- **解决**: 检查网络连接，确认能访问 `api.openai.com`

### 权限问题
- **现象**: 返回 401/403 错误
- **解决**: 检查 API 密钥是否有效，账户是否有足够余额

### 音频权限
- **现象**: 录音功能无法使用
- **解决**: 确保应用已获得麦克风和音频播放权限

## 📊 监控指标

测试通过后，关注以下指标：
- **响应时间**: LLM 响应 < 5秒，TTS 生成 < 3秒
- **成功率**: 对话成功率 > 95%
- **音频质量**: 清晰的录音和播放

## 🎯 下一步

配置完成后，您可以：
1. 体验完整的语音对话功能
2. 测试不同的对话场景
3. 调整嘎巴龙的个性设置
4. 优化用户体验

---

**🔥 准备好了吗？开始与嘎巴龙进行真正的AI对话吧！**